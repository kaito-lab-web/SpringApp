<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Spring Boot æ§‹é€ è§£èª¬ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<style>
		body {
			background-color: #f0f2f5;
			padding: 2rem;
			font-family: "Meiryo", sans-serif;
			line-height: 1.6;
		}

		.container {
			background-color: white;
			padding: 3rem;
			border-radius: 12px;
			box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
			max-width: 1100px;
		}

		.layer-box {
			border: 2px solid #dee2e6;
			border-radius: 10px;
			padding: 1.5rem;
			margin-bottom: 2rem;
			transition: transform 0.2s;
		}

		.layer-box:hover {
			transform: translateY(-5px);
			border-color: #0d6efd;
		}

		.layer-title {
			font-weight: bold;
			font-size: 1.4rem;
			margin-bottom: 1rem;
			display: flex;
			align-items: center;
		}

		.layer-title span {
			background: #0d6efd;
			color: white;
			padding: 0.2rem 0.8rem;
			border-radius: 20px;
			font-size: 0.9rem;
			margin-right: 1rem;
		}

		.arrow {
			text-align: center;
			font-size: 2rem;
			color: #adb5bd;
			margin: -1rem 0 1rem 0;
		}

		code {
			color: #d63384;
			font-weight: bold;
		}

		pre {
			background: #212529;
			color: #f8f9fa;
			padding: 1rem;
			border-radius: 8px;
			font-size: 0.9rem;
		}

		.point-card {
			background: #e7f1ff;
			border-left: 5px solid #0d6efd;
			padding: 1rem;
			margin: 1rem 0;
		}
	</style>
</head>

<body>
	<div class="container">
		<header class="text-center mb-5">
			<h1 class="display-4 fw-bold text-primary">Spring Boot Architecture</h1>
			<p class="lead text-muted">Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å…¨ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ ã¨é€£æºã®ä»•çµ„ã¿</p>
		</header>

		<div class="layer-box">
			<div class="layer-title"><span>UI Layer</span> Controller & Form</div>
			<p><strong>å½¹å‰²ï¼š</strong> å¸ä»¤å¡”ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å–ã‚Šã€ç”»é¢ã®å…¥åŠ›ï¼ˆFormï¼‰ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã‚µãƒ¼ãƒ“ã‚¹ã¸ç¹‹ãã€‚</p>
			<ul>
				<li><code>@Controller</code>: ç”»é¢é·ç§»ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ã‚¯ãƒ©ã‚¹ã€‚</li>
				<li><code>@Valid / BindingResult</code>: ãƒ•ã‚©ãƒ¼ãƒ ã®å…¥åŠ›å†…å®¹ãŒæ­£ã—ã„ã‹æ¤œè¨¼ã™ã‚‹ã€‚</li>
				<li><code>@InitBinder</code>: ç©ºæ–‡å­—ã‚’nullã«å¤‰æ›ã™ã‚‹ãªã©ã€ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‰ã‚’èª¿æ•´ã™ã‚‹ã€‚</li>
			</ul>
			<pre><code>// å¸ä»¤å¡”ã®å‹•ãï¼šãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ(PRGãƒ‘ã‚¿ãƒ¼ãƒ³)ã§äºŒé‡é€ä¿¡é˜²æ­¢
return "redirect:/user-edit?success";</code></pre>
		</div>

		<div class="arrow">â†“</div>

		<div class="layer-box">
			<div class="layer-title"><span>Business Layer</span> Service</div>
			<p><strong>å½¹å‰²ï¼š</strong> æ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè¡Œã€‚è¨ˆç®—ã€æ¡ä»¶åˆ¤å®šã€ãƒ‡ãƒ¼ã‚¿ã®è©°ã‚æ›¿ãˆï¼ˆForm â†” Entityï¼‰ã‚’è¡Œã†ã€‚</p>
			<div class="point-card">
				<strong>ğŸ’¡ ãªãœServiceãŒå¿…è¦ï¼Ÿ</strong><br>
				Controllerã«å‡¦ç†ã‚’æ›¸ãã™ããªã„ãŸã‚ï¼ˆFat Controllerã®é˜²æ­¢ï¼‰ã€‚ã€Œä¿å­˜ã™ã‚‹å‰ã«æ—¥ä»˜ã‚’å…¥ã‚Œã‚‹ã€ã€Œãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ¯”è¼ƒã™ã‚‹ã€ãªã©ã®ã€Œä»•äº‹ã€ã¯ã“ã“ã«æ›¸ãã¾ã™ã€‚
			</div>
		</div>

		<div class="arrow">â†“</div>

		<div class="layer-box">
			<div class="layer-title"><span>Data Layer</span> Repository & Entity</div>
			<p><strong>å½¹å‰²ï¼š</strong> ãƒ‡ãƒ¼ã‚¿ã®ä¿ç®¡åº«ã€‚ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆJavaã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨åŒæœŸã•ã›ã‚‹ã€‚</p>
			<table class="table table-sm mt-3">
				<tr class="table-secondary">
					<th>è¦ç´ </th>
					<th>èª¬æ˜</th>
				</tr>
				<tr>
					<td><code>@Entity</code></td>
					<td>DBã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¨1å¯¾1ã§å¯¾å¿œã™ã‚‹ã‚¯ãƒ©ã‚¹ã€‚</td>
				</tr>
				<tr>
					<td><code>@Id</code></td>
					<td>ä¸»ã‚­ãƒ¼ï¼ˆPrimary Keyï¼‰ã€‚ãƒ‡ãƒ¼ã‚¿ã®è­˜åˆ¥å­ã€‚</td>
				</tr>
				<tr>
					<td><code>JpaRepository</code></td>
					<td>ç¶™æ‰¿ã™ã‚‹ã ã‘ã§ <code>save()</code> ã‚„ <code>findById()</code> ãŒä½¿ãˆã‚‹é­”æ³•ã®æ¿ã€‚</td>
				</tr>
			</table>
		</div>

		<hr class="my-5">

		<h2 class="text-center mb-4">ğŸ” Security & Auth (èªè¨¼ã®ä»•çµ„ã¿)</h2>



		<div class="row mt-4">
			<div class="col-md-6">
				<div class="p-3 border rounded bg-light">
					<h5 class="fw-bold">SecurityConfig</h5>
					<p class="small">ã€Œèª°ãŒã©ã“ã«å…¥ã‚Œã‚‹ã‹ã€ã®ãƒ«ãƒ¼ãƒ«ãƒ–ãƒƒã‚¯ã€‚ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®æš—å·åŒ–æ–¹å¼ï¼ˆBCryptï¼‰ã‚‚ã“ã“ã§æ±ºã‚ã‚‹ã€‚</p>
				</div>
			</div>
			<div class="col-md-6">
				<div class="p-3 border rounded bg-light">
					<h5 class="fw-bold">CustomUserDetailsService</h5>
					<p class="small">DBã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¢ã—å‡ºã—ã€SecurityãŒç†è§£ã§ãã‚‹ <code>UserDetails</code> å½¢å¼ã«å¤‰æ›ã—ã¦æ¸¡ã™é€šè¨³è€…ã€‚</p>
				</div>
			</div>
		</div>

		<div class="layer-box mt-4 border-primary">
			<div class="layer-title text-primary"><span>Success Handler</span> LoginSuccessHandler</div>
			<p>ãƒ­ã‚°ã‚¤ãƒ³ãŒæˆåŠŸã—ãŸã€Œç›´å¾Œã€ã«å®Ÿè¡Œã•ã‚Œã‚‹å‡¦ç†ã€‚ä»Šå›ã®ã‚¢ãƒ—ãƒªã§ã¯ã“ã“ã§ <strong>ã€Œæœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚ã€</strong> ã‚’DBã«æ›¸ãè¾¼ã‚“ã§ã„ã¾ã™ã€‚</p>
			<pre><code>// èªè¨¼æˆåŠŸæ™‚ã«å‰²ã‚Šè¾¼ã¿å‡¦ç†
public void onAuthenticationSuccess(...) {
    userRepository.save(lastLoginDateUpdate);
    response.sendRedirect("/menu");
}</code></pre>
		</div>

		<footer class="mt-5 text-center text-muted border-top pt-4">
			<p>ã“ã®æ§‹é€ ã‚’ãƒã‚¹ã‚¿ãƒ¼ã™ã‚Œã°ã€ã©ã‚“ãªæ©Ÿèƒ½è¿½åŠ ã‚‚æ€–ãã‚ã‚Šã¾ã›ã‚“ï¼é ‘å¼µã‚Šã¾ã—ã‚‡ã†ã€‚</p>
			<p class="small">Created for Spring Boot Learning Reference 2025</p>
		</footer>
	</div>
</body>

</html>